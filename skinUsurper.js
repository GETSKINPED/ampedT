"use strict";var skinUsurper={};skinUsurper["getMyskin"]=function(buffer){if(buffer&&buffer.byteLength){if(window["Kar"]){var kar=new window["Kar"](new FileInfo(".skin",buffer));var files=kar.getEntries();for(var i=0;i<files.length;i++){kar.checkBuffer(i);if(files[i]["buffer"].byteLength){return files[i]["buffer"];}}}}};skinUsurper["getUserID"]=function(list){var userID="";if(window["Kar"]){for(var i=0;i<list.length;i++){var kar=new window["Kar"](new FileInfo(".skin",list[i]["buffer"]));var files=kar.getEntries();var t="/myskin";var s="";for(var i=0;i<files.length;i++){if(files[i]["path"].endsWith(t)){s=files[i]["path"].slice(0,files[i]["path"].length-t.length);break;}}
if(s){if(userID==""){userID=s;}
else if(userID!=s){userID="";break;}}}}
return userID;};skinUsurper["setUserID"]=function(buffer,userID){var myskin=skinUsurper["getMyskin"](buffer);if(myskin){myskin=myskin.modData("myskin>myskin",{"userID":userID});var kar=new window["Kar"](new FileInfo(".skin"));if(userID){kar.addFile({"path":userID+"/myskin","buffer":myskin});}
kar.addFile({"path":"myskin","buffer":myskin});return kar.to();}
return buffer.getBuffer();};ModList["skin>skin"]=ModList["skin>skin"]||{};ModList["skin>skin"]["option"]=ModList["skin>skin"]["option"]||{};ModList["skin>skin"]["option"]["userID"]="";ModList["skin>skin"]["getOption"]=ModList["skin>skin"]["getOption"]||{};ModList["skin>skin"]["getOption"]["userID"]=skinUsurper["getUserID"];ModList["skin>skin"]["modData"]=ModList["skin>skin"]["modData"]||{};ModList["skin>skin"]["modData"]["userID"]=skinUsurper["setUserID"];ModList["hskin>hskin"]=ModList["hskin>hskin"]||{};ModList["hskin>hskin"]["option"]=ModList["hskin>hskin"]["option"]||{};ModList["hskin>hskin"]["option"]["userID"]="";ModList["hskin>hskin"]["getOption"]=ModList["hskin>hskin"]["getOption"]||{};ModList["hskin>hskin"]["getOption"]["userID"]=skinUsurper["getUserID"];ModList["hskin>hskin"]["modData"]=ModList["hskin>hskin"]["modData"]||{};ModList["hskin>hskin"]["modData"]["userID"]=skinUsurper["setUserID"];ModList["hhskin>hhskin"]=ModList["hhskin>hhskin"]||{};ModList["hhskin>hhskin"]["option"]=ModList["hhskin>hhskin"]["option"]||{};ModList["hhskin>hhskin"]["option"]["userID"]="";ModList["hhskin>hhskin"]["getOption"]=ModList["hhskin>hhskin"]["getOption"]||{};ModList["hhskin>hhskin"]["getOption"]["userID"]=skinUsurper["getUserID"];ModList["hhskin>hhskin"]["modData"]=ModList["hhskin>hhskin"]["modData"]||{};ModList["hhskin>hhskin"]["modData"]["userID"]=skinUsurper["setUserID"];UpdateModList();UpdatePluginList("skinUsurper");