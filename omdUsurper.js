"use strict";var omdUsurper={};omdUsurper["getMymap"]=function(buffer){if(buffer&&buffer.byteLength){if(window["Kar"]){var kar=new window["Kar"](new FileInfo(".omd",buffer));var files=kar.getEntries();for(var i=0;i<files.length;i++){kar.checkBuffer(i);if(files[i]["buffer"].byteLength){return files[i]["buffer"];}}}}};omdUsurper["getUserID"]=function(list){var userID="";if(window["Kar"]){for(var i=0;i<list.length;i++){var kar=new window["Kar"](new FileInfo(".omd",list[i]["buffer"]));var files=kar.getEntries();var t="/mymap";var s="";for(var i=0;i<files.length;i++){if(files[i]["path"].endsWith(t)){s=files[i]["path"].slice(0,files[i]["path"].length-t.length);break;}}
if(s){if(userID==""){userID=s;}
else if(userID!=s){userID="";break;}}}}
return userID;};omdUsurper["setUserID"]=function(buffer,userID){var mymap=omdUsurper["getMymap"](buffer);if(mymap){var kar=new window["Kar"](new FileInfo(".omd"));if(userID){kar.addFile({"path":userID+"/mymap","buffer":mymap});}
kar.addFile({"path":"mymap","buffer":mymap});return kar.to();}
return buffer.getBuffer();};ModList["omd>omd"]=ModList["omd>omd"]||{};ModList["omd>omd"]["option"]=ModList["omd>omd"]["option"]||{};ModList["omd>omd"]["option"]["userID"]="";ModList["omd>omd"]["getOption"]=ModList["omd>omd"]["getOption"]||{};ModList["omd>omd"]["getOption"]["userID"]=omdUsurper["getUserID"];ModList["omd>omd"]["modData"]=ModList["omd>omd"]["modData"]||{};ModList["omd>omd"]["modData"]["userID"]=omdUsurper["setUserID"];UpdateModList();UpdatePluginList("omdUsurper");